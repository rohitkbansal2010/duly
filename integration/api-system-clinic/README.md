# System Clinic WebApi status
[![Build Status](https://dev.azure.com/Next-Generation-Data-Platform/duly.api.v1.integration/_apis/build/status/api-system-clinic-webapi?repoName=api-system-clinic&branchName=dev)](https://dev.azure.com/Next-Generation-Data-Platform/duly.api.v1.integration/_build/latest?definitionId=39&repoName=api-system-clinic&branchName=dev)

[![Quality Gate Status](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_webapi&metric=alert_status&token=bcc636c331ecf3c45600609953abb92e308bc141)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_webapi)
[![Reliability Rating](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_webapi&metric=reliability_rating&token=bcc636c331ecf3c45600609953abb92e308bc141)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_webapi)
[![Security Rating](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_webapi&metric=security_rating&token=bcc636c331ecf3c45600609953abb92e308bc141)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_webapi)

[![Bugs](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_webapi&metric=bugs&token=bcc636c331ecf3c45600609953abb92e308bc141)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_webapi)
[![Lines of Code](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_webapi&metric=ncloc&token=bcc636c331ecf3c45600609953abb92e308bc141)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_webapi)
[![Coverage](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_webapi&metric=coverage&token=bcc636c331ecf3c45600609953abb92e308bc141)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_webapi)
[![Vulnerabilities](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_webapi&metric=vulnerabilities&token=bcc636c331ecf3c45600609953abb92e308bc141)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_webapi)
[![Code Smells](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_webapi&metric=code_smells&token=bcc636c331ecf3c45600609953abb92e308bc141)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_webapi)

# System Clinic Audit status
[![Build Status](https://dev.azure.com/Next-Generation-Data-Platform/duly.api.v1.integration/_apis/build/status/clinic-audit-ingestion-azure-function?repoName=api-system-clinic&branchName=dev)](https://dev.azure.com/Next-Generation-Data-Platform/duly.api.v1.integration/_build/latest?definitionId=51&repoName=api-system-clinic&branchName=dev)

[![Quality Gate Status](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_audit&metric=alert_status&token=5dc0ca09508dc0b19ccb1f13178f94df0d3241e3)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_audit)
[![Reliability Rating](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_audit&metric=reliability_rating&token=5dc0ca09508dc0b19ccb1f13178f94df0d3241e3)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_audit)
[![Security Rating](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_audit&metric=security_rating&token=5dc0ca09508dc0b19ccb1f13178f94df0d3241e3)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_audit)

[![Bugs](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_audit&metric=bugs&token=5dc0ca09508dc0b19ccb1f13178f94df0d3241e3)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_audit)
[![Lines of Code](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_audit&metric=ncloc&token=5dc0ca09508dc0b19ccb1f13178f94df0d3241e3)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_audit)
[![Coverage](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_audit&metric=coverage&token=5dc0ca09508dc0b19ccb1f13178f94df0d3241e3)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_audit)
[![Vulnerabilities](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_audit&metric=vulnerabilities&token=5dc0ca09508dc0b19ccb1f13178f94df0d3241e3)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_audit)
[![Code Smells](https://sonarqube.duly-np.digital/api/project_badges/measure?project=duly_duly.api.v1.integration_api-system-clinic_audit&metric=code_smells&token=5dc0ca09508dc0b19ccb1f13178f94df0d3241e3)](https://sonarqube.duly-np.digital/dashboard?id=duly_duly.api.v1.integration_api-system-clinic_audit)

# System Clinic Client status

[![Build Status](https://dev.azure.com/Next-Generation-Data-Platform/duly.api.v1.integration/_apis/build/status/api-system-clinic-client?repoName=api-system-clinic&branchName=dev)](https://dev.azure.com/Next-Generation-Data-Platform/duly.api.v1.integration/_build/latest?definitionId=38&repoName=api-system-clinic&branchName=dev)


# Introduction 
Clinic System Api provides unified adapter over Fhir and Custom APIs provided by Epic.

It consits of:
- [src/WebApi](./src/WebApi) - That provides WebApi for Clients. This is the main executable.
- [src/Client/](./src/Client/) - That is a library for using WebApi.
- [src/Contracts](./src/Contracts) - In which one can communicate with this API.
- [src/Fhir/Adapter](./src/Fhir/Adapter) - Which is a wrapper over FHIR API.
- [src/Audit/Ingestion](./src/Audit/Ingestion) - The Azure Function to ingest audit events from Event Grid Topic.

# Getting Started 
Using Visual Studio 2019:
1.  [Install Visual Studio 2019](https://docs.microsoft.com/en-us/visualstudio/install/install-visual-studio?view=vs-2019) 
2.	Clone the Repo using your favorite method. This can be done either through ADO or through ssh
3.	Open solution in visual studio src/Duly.Clinic.System.Api.sln

# Build and Test
Using Visual Studio 2019:
All projects are configured to work out of the box, so just running Build All and Run All Tests Should do the trick.

# Security
Web API requires authentithication to yield any results.

To authentithicate follow these steps:
1. Click on Authorize 🔓
2. Paste client Id which can be provided by Systems Engineer or Developer Team Lead
3. Check all required scopes
4. Press Authorize 
5. You will be taken to organisation login page. Check that your Duly account is sellected
6. Compelte all needed authorization steps on microsoft portal as usual
7. In the end you should be forwarded back to the Swagger and see Authorized
8. Press Close
9. Enjoy using the API